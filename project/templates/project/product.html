<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>产品管理</title>
    <link rel="stylesheet" href="{% static 'bootstrap-3.3.7-dist/css/bootstrap.min.css' %}">
    <script src="{% static 'jquery-2.1.1/jquery.min.js' %}"></script>
	<script src="{% static 'bootstrap-3.3.7-dist/js/bootstrap.min.js' %}"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    {# 导入数据 #}
    <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="product_file" required >
        <input type="submit" value="导入数据" >
    </form>

    {# 导出数据 #}
    <a href="{% url 'project:download' %}">
        <button class="btn btn-primary btn-lg" type="button" >导出数据</button>
    </a>

    {# 手动添加一条数据，按钮触发模态框 #}
    <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">添加</button>
    {# 模态框（Modal） #}
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		    <div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">添加产品</h4>
				</div>

				<div class="modal-body">
					<form method="post" class="form-horizontal" role="form" action="{% url 'project:product_add' %}">
						{% csrf_token %}
						<div class="form-group">
							<label for="pd_model" class="col-sm-3 control-label">产品型号</label>
							<div class="col-sm-9">
								<input type="text" id="pd_model" name="pd_model" class="form-control">
							</div>
						</div>

						<div class="form-group">
							<label for="pd_model" class="col-sm-3 control-label">产品类型</label>
							<div class="col-sm-9">
								<input type="text" id="pd_type" name="pd_type" class="form-control">
							</div>
						</div>

						<div class="form-group">
							<label for="pd_model" class="col-sm-3 control-label">产品名称</label>
							<div class="col-sm-9">
								<input type="text" id="pd_name" name="pd_name" class="form-control">
							</div>
						</div>

						<div class="text-right">
							<button type="button" class="btn btn-default right" data-dismiss="modal">关闭</button>
							<button type="submit" class="btn btn-primary" >确定</button>
						</div>
					</form>
				</div>
		    </div>
		</div>
	</div>

    {# 显示当前页数据 #}
    <table class="table table-hover table-bordered">
        <TR>
            <TH>序号</TH>
            <TH>产品型号</TH>
            <TH>产品类型</TH>
            <TH>产品名称</TH>
            <TH>操作</TH>
        </TR>
        {% for product in product_date %}
            <TR>
                <TD>{{forloop.counter}}</TD>
                <TD>{{product.pd_model}}</TD>
                <TD>{{product.pd_type}}</TD>
                <TD>{{product.pd_name}}</TD>
                <TD>
                    <a href="?page={{product_date.number}}&del_id={{product.id}}">
                        <button type="button">删除</button>
                    </a>
                </TD>
            </TR>
        {% endfor%}
    </table>

    {{wrong}}

    {# 分页 #}
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {# 如果有上一页 #}
            {% if product_date.has_previous %}
                <li>
                    <a href="?page={{product_date.previous_page_number}}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            {% endif %}
            {# 当前页数突出显示 #}
            {% for pg in product_date.paginator.page_range %}
                {% if product_date.number == pg %}
                    <li class="active">
                        <a href="?page={{pg}}">{{pg}}</a>
                    </li>
                {% else %}
                    <li>
                        <a href="?page={{pg}}">{{pg}}</a>
                    </li>
                {% endif %}
            {% endfor %}

            {# 如果有下一页 #}
            {% if product_date.has_next %}
                <li>
                    <a href="?page={{product_date.next_page_number}}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>
</body>
</html>